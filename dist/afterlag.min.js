/* Afterlag.js 2.0.2 â€” Plugin for tracking page load lags. Author: Sergey Dmitriev (http://serdmi.com). Licensed MIT. */
(function(){var t,s;s=function(){function t(){}return t.merge_options=function(t,s){var i,e,n;n={};for(e in t)i=t[e],n[e]=i;for(e in s)i=s[e],n[e]=i;return n},t}(),t=function(){function t(t){var s;null==t&&(t={}),this._set_options(t),this._callbacks=[],s=this,this.ready=!1,this._lags_was=!1,this.status="processing",this.options.timeout>0&&(this._timeout_process=setTimeout(function(){return s._finish("timeout")},this.options.timeout)),this._success_iterations=0,this._preprocess=setTimeout(function(){return s._time_started=(new Date).getTime(),s._last_checked=s._time_started,s._process=setInterval(function(){var t,i;return i=(new Date).getTime(),t=i-s._last_checked-s.options.frequency,s.options.min_delta<t&&t<s.options.max_delta?(!s.options.need_lags||s._lags_was)&&(s._success_iterations++,s._success_iterations>=s.options.iterations&&s._finish("success")):(s._success_iterations=0,s._lags_was=!0),s._last_checked=i},s.options.frequency)},this.options.delay)}return t.defaults={delay:200,frequency:50,iterations:10,duration:null,scatter:5,min_delta:null,max_delta:null,timeout:null,need_lags:!1},t.prototype._set_options=function(t){return this.options=s.merge_options(this.constructor.defaults,t),null!=this.options.duration&&(this.options.iterations=Math.ceil(this.options.duration/this.options.frequency)),null==this.options.min_delta&&(this.options.min_delta=-this.options.scatter),null==this.options.max_delta?this.options.max_delta=this.options.scatter:void 0},t.prototype.info=function(){var t,s;return null!=this.time_passed?s=this.time_passed:(t=(new Date).getTime(),s=t-this._time_started),{status:this.status,time_passed:s,ready:this.ready,options:this.options}},t.prototype._finish=function(t){var s,i,e,n,o,a;for(null!=this._preprocess&&clearTimeout(this._preprocess),null!=this._process&&clearInterval(this._process),null!=this._timeout_process&&clearTimeout(this._timeout_process),this.ready=!0,this.status=t,n=(new Date).getTime(),this.time_passed=n-this._time_started,o=this._callbacks,a=[],i=0,e=o.length;e>i;i++)s=o[i],a.push(s.fn.call(s.self,this.info()));return a},t.prototype.run=function(t,s){var i;return null==s&&(i=[t,this],s=i[0],t=i[1]),this.ready?s.call(t,this.info()):this._callbacks.push({fn:s,self:t}),this},t}(),window.Afterlag=t}).call(this);